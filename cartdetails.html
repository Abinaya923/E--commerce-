<!DOCTYPE html>
<html>
<head>
  <title>Cart Details</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <div class="row m-5">
  
    <div class="col-6">
      <img id="productImg" src="images/dq.png" style="width:500px;" />
    </div>

 
    <div class="col-6 d-flex align-items-center">
      <div>
        <h4>Delivery by 29, Tuesday</h4>
        <h6 id="productName">Shirt</h6>
        <p class="mb-0">Price: Rs.<span id="productPrice">0</span></p>   
        <p class="mb-0">Brand: <span id="productBrand">-</span></p>
        <p>Material: <span id="productMaterial">-</span></p>

      
        <div id="sizeButtons" class="d-flex gap-2"></div>

       <div class="mt-3">
  <button id="addToCartBtn" class="btn btn-primary">Add to Cart</button> 
  <a href="pay.html" class="btn btn-success">Buy Now</a>
</div>

      </div>
    </div>
  </div>

  
<script>
  const product = JSON.parse(localStorage.getItem("selectedProduct"));
  const selectSize=new Set();
  if (product) {
    document.getElementById("productImg").src = product.img;
    document.getElementById("productName").textContent = product.name;
    document.getElementById("productPrice").textContent = product.price;
    document.getElementById("productBrand").textContent = product.brand;
    document.getElementById("productMaterial").textContent = product.material;

    const buttons = document.getElementById("sizeButtons");
    buttons.innerHTML = "";
    product.sizes.forEach(size => {
      const btn = document.createElement("button");
      btn.textContent = size.trim();
      btn.className = "btn btn-outline-primary";
      buttons.appendChild(btn);

      btn.addEventListener("click",()=>{
        if(selectSize.has(size)){
          selectSize.delete(size);
          btn.classList.remove("active","btn-primary");
        }
        else{
          selectSize.add(size);
          btn.classList.add("active","btn-primary");
        }
      });
    });
  }

  document.getElementById("addToCartBtn").addEventListener("click",()=>{
    if(!product){
      alert("No Product Selected");
      return;
    }
    if(selectSize.size===0){
      alert("pls select a size");
      return;
    }

    const cart=JSON.parse(localStorage.getItem("cart") || "[]");
      const productToCart = { ...product, selectSize: Array.from(selectSize) };
    cart.push(productToCart);
    localStorage.setItem("cart",JSON.stringify(cart));
    window.location.href="cart.html";
  })
</script>

</body>
</html>
