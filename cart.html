<!DOCTYPE html>
<html>
<head>
  <title>Cart Details</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <div class="row ms-5 mt-5 d-flex align-items-start">
    <div class="col-8">
      <h2>Your Cart</h2>
      <div id="cartItems" class="row g-4 mt-2 ">
      </div>
    </div>

    <div class="col-4 mt-5 d-flex flex-column align-items-center">
      <h5 class="text-center">Cart Summary</h5>
      <p id="sub">Subtotal: <span>0</span></p>
      <p id="gst">GST (18%): <span>0</span></p>
      <p id="total">Total: <span>0</span></p>
      <a href="pay.html" id="check" class="btn btn-primary">Check Out</a>
    </div>
  </div>

  <script>
    let cart = JSON.parse(localStorage.getItem("cart") || "[]");
    const container = document.getElementById("cartItems");

    function calculateSummary() {
      let subtotal = cart.reduce((sum, p) => sum + parseFloat(p.price), 0);
      let gst = subtotal * 0.18; 
      let total = subtotal + gst;

      document.querySelector("#sub span").textContent = subtotal.toFixed(2);
      document.querySelector("#gst span").textContent = gst.toFixed(2);
      document.querySelector("#total span").textContent = total.toFixed(2);
    }

    function renderCart() {
      container.innerHTML = "";

      if (cart.length === 0) {
        container.innerHTML = "<p>Your cart is empty</p>";
      } else {
        cart.forEach((product, index) => {
          const item = document.createElement("div");
          item.className = "col-12";

      item.innerHTML = `
  <div class="row border p-3 rounded position-relative align-items-start  w-100">
    
   
    <div class="col-2 ">
      <img src="${product.img}" class="img-fluid" style="max-width:120px;"/>
    </div>

   
    <div class="col-10  d-flex flex-column align-items-center justify-content-between">
      <h6>${product.name}</h6>
      <p class="mb-1">Price: Rs.${product.price}</p>
      <p class="mb-1">Brand: ${product.brand}</p>
      <p class="mb-1">Material: ${product.material}</p>
      <div class="d-flex gap-2 flex-wrap ">
        ${(product.selectSize || [])
          .map(size => `<button class="btn btn-outline-primary btn-sm">${size}</button>`)
          .join("")}
      </div>
    </div>

    
    <button type="button" class="btn-close position-absolute top-0 end-0 m-1 "></button>
  </div>
`;


          container.appendChild(item);

          const closeBtn = item.querySelector(".btn-close");
          closeBtn.addEventListener("click", () => {
            cart.splice(index, 1);
            localStorage.setItem("cart", JSON.stringify(cart));
            renderCart();
          });
        });
      }

      calculateSummary();
    }

    document.getElementById("check").addEventListener("click", () => {
      calculateSummary();
    });

    renderCart();
  </script>
</body>
</html>
